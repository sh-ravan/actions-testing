name: ">> Create a release"

on:
  workflow_dispatch:
    inputs:
      compare:
        type: string
        description: Version number (without v prefix)
        required: true

jobs:
  autopr:
    if: ${{ (github.actor == 'sh-ravan') || (github.actor == 'kdyadav') || (github.actor == 'Anil-Pujeri') || (github.actor == 'saideeptalari') }}
    runs-on: ubuntu-latest

    steps:
      - run: echo "âš¡ This job was triggered by a ${{ github.event_name }} event."
      - run: echo "ğŸ§ Running job on a ${{ runner.os }} server."

      - name: Check out repository code
        uses: actions/checkout@v3

      - run: echo "ğŸ‘ The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "ğŸš€ The workflow is now ready to start."

      - name: Merge
        uses: tretuna/sync-branches@1.4.0
        with:
          GITHUB_TOKEN: ${{secrets.GITHUB_TOKEN}}
          FROM_BRANCH: "${{ github.event.inputs.compare }}"
          TO_BRANCH: "${{ github.event.inputs.base }}"
          PULL_REQUEST_TITLE: "chore: merge ${{ github.event.inputs.compare }} into ${{ github.event.inputs.base }}"
          PULL_REQUEST_BODY: "${{ github.event.inputs.compare }} â†’ ${{ github.event.inputs.base }}"

      - run: echo "â¹ End of job. Status - ${{ job.status }}."
